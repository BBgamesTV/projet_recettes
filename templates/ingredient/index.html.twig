{% extends 'base.html.twig' %}

{% block title %}Liste des ingrédients
{% endblock %}

{% block body %}
	<div class="container mt-4">
		<h1 class="mb-4">Liste des ingrédients</h1>

		{# Messages flash #}
		{% for message in app.flashes('success') %}
			<div class="alert alert-success">
				{{ message }}
			</div>
		{% endfor %}

		<div class="mb-3">
			<a href="{{ path('ingredient_create_store_v3') }}" class="btn btn-primary">
				➕ Créer un ingrédient
			</a>
			<a href="{{ path('app_ingredient') }}" class="btn btn-primary">	
				📖 Liste des ingrédients
			</a>

		</div>

		<table class="table table-striped table-bordered">
			<thead class="table-dark">
				<tr>
					<th>ID</th>
					<th>Nom</th>
					<th>Prix</th>
					<th>Créé le</th>
					<th>Modifier</th>
					<th>Supprimer</th>
				</tr>
			</thead>
			<tbody>
				{% for ingredient in ingredients %}
					<tr>
						<td>{{ ingredient.id }}</td>
						<td>{{ ingredient.nom }}</td>
						<td>{{ ingredient.prix }}
							€</td>
						<td>{{ ingredient.createdAt|date('d/m/Y H:i') }}</td>

						{# Lien Modifier #}
						<td>
							<a href="{{ path('ingredient.edit', {id: ingredient.id}) }}" class="btn btn-warning btn-sm">
								✏️ Modifier
							</a>
						</td>

						{# Formulaire Supprimer #}
						<td>
							<form method="post" action="{{ path('ingredient.delete', {id: ingredient.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet ingrédient ?');">
								<input type="hidden" name="_method" value="DELETE">
								<button class="btn btn-danger btn-sm">🗑️ Supprimer</button>
							</form>
						</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="6" class="text-center">Aucun ingrédient trouvé</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}
