{% extends 'base.html.twig' %}

{% block title %}Liste des Ingrédients
{% endblock %}

{% block body %}
	<div
		class="container mx-auto px-4 py-8">

		{# Message Flash #}
		{% for message in app.flashes('success') %}
			<div class="flash-success bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded-md shadow-lg" role="alert">
				<p class="font-bold">Succès !</p>
				<p>{{ message }}</p>
			</div>
		{% endfor %}

		<div class="flex justify-between items-center mb-8">
			<h1 class="text-4xl font-bold text-gray-800 page-title">Liste des Ingrédients</h1>
			<a href="{{ path('ingredient_create_store_v3') }}" class="create-button bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-md transition duration-300 transform hover:scale-105">
				Créer un ingrédient
			</a>
		</div>

		<div class="bg-white shadow-2xl rounded-lg overflow-hidden">
			<table class="min-w-full leading-normal">
				<thead class="bg-gray-800 text-white">
					<tr>
						<th class="px-5 py-3 border-b-2 border-gray-200 text-left text-xs font-semibold uppercase tracking-wider">ID</th>
						<th class="px-5 py-3 border-b-2 border-gray-200 text-left text-xs font-semibold uppercase tracking-wider">Nom</th>
						<th class="px-5 py-3 border-b-2 border-gray-200 text-left text-xs font-semibold uppercase tracking-wider">Prix</th>
						<th class="px-5 py-3 border-b-2 border-gray-200 text-left text-xs font-semibold uppercase tracking-wider">Créé le</th>
						<th class="px-5 py-3 border-b-2 border-gray-200 text-left text-xs font-semibold uppercase tracking-wider">Actions</th>
					</tr>
				</thead>
				<tbody>
					{% for ingredient in ingredients %}
						<tr class="ingredient-row hover:bg-gray-100 transition duration-300">
							<td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">{{ ingredient.id }}</td>
							<td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">
								<p class="text-gray-900 whitespace-no-wrap font-semibold">{{ ingredient.nom }}</p>
							</td>
							<td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">{{ ingredient.prix }}
								€</td>
							<td class="px-5 py-5 border-b border-gray-200 bg-white text-sm">{{ ingredient.createdAt|date('d/m/Y H:i') }}</td>
							<td class="px-5 py-5 border-b border-gray-200 bg-white text-sm space-x-2">
								<a href="{{ path('ingredient.edit', {id: ingredient.id}) }}" class="text-yellow-600 hover:text-yellow-900 font-semibold">Modifier</a>
								<form method="post" action="{{ path('ingredient.delete', {id: ingredient.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet ingrédient ?');" class="inline">
									<input type="hidden" name="_method" value="DELETE">
									<button class="text-red-600 hover:text-red-900 font-semibold">Supprimer</button>
								</form>
							</td>
						</tr>
					{% else %}
						<tr>
							<td colspan="5" class="text-center py-10 text-gray-500">Aucun ingrédient trouvé.</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
{% endblock %}
